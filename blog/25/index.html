<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="含哺而熙，鼓腹而游">
<title>
多线程常用操作方法 - 孙丁一的博客
</title>



        <meta property="og:title" content="多线程常用操作方法 - 孙丁一的博客" />
<meta property="og:type" content="website" />
<meta property="og:description" content="含哺而熙，鼓腹而游"/>
<meta property="og:url" content="https://sundingyi.com/blog/25/"/>
<meta property="og:site_name" content="孙丁一的博客"/>




<meta property="og:image" content="https://sundingyi.com/home/about.png"/>




        
<link rel="shortcut icon" href="/img/head.png">


        





<link rel="stylesheet" href="/css/main.min.c15b67148de319541c0cb1da95ab485946690f7e1cc58ea480c801bce62abe89.css" integrity="sha256-wVtnFI3jGVQcDLHalatIWUZpD34cxY6kgMgBvOYqvok=" crossorigin="anonymous" media="screen">





        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero  fade-in one ">
                

<h1 class="bold-title is-1">文章</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/#%E6%96%87%E7%AB%A0">
                
                文章
                
            </a>
            
            
            
            <a class="navbar-item" href="/#about">
                
                关于
                
            </a>
            
            
            
            <a class="navbar-item" href="/#%E5%9B%BE">
                
                图
                
            </a>
            
            
            
            <a class="navbar-item" href="/#contact">
                
                与我联系
                
            </a>
            
            
            
            <a class="navbar-item" href="https://doc.sundingyi.com/">
                
                文档
                
            </a>
            
            
            
            <a class="navbar-item" href="https://drive.sundingyi.com/">
                
                网盘
                
            </a>
            
            
            
            <a class="navbar-item" href="https://www.douban.com/people/104121744/">
                
                豆瓣主页
                
            </a>
            
            
            
        </div>
    </nav>
    <hr>
</div>



                
<div class="container">
    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://sundingyi.com/blog/25/">多线程常用操作方法</a>
    </h2>
    <div class="post-data">
        2020.12.5 ・ 
        共 2110 字，您可能需要 5 分钟阅读
        
    </div>
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      
     <p>
         Tags: 
          
           <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B">
             多线程</a>,
         
           <a href="/tags/java">
             Java</a>,
         
           <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
             学习笔记</a>
         
        </p>
      
    
      
    
</div>

<div class="container markdown top-pad">
    <p>多线程的常用方法大多都在 Thread 类中定义了。</p>

<h2 id="线程的命名与取得" class="anchor-link"><a href="#%e7%ba%bf%e7%a8%8b%e7%9a%84%e5%91%bd%e5%90%8d%e4%b8%8e%e5%8f%96%e5%be%97">线程的命名与取得</a></h2>
<p>多线程的运行状态是不确定的，如果想要获取到某一个特定的线程，就需要通过线程的名字来进行线程操作。所以线程的名称是一个很重要的概念，在 Thread 类中就提供有线程名称的方法。</p>
<ul>
<li>构造方法：<code>public Thread(Runnable target, String name)</code></li>
<li>设置名字：<code>public final void setName(String name)</code></li>
<li>取得名字：<code>public final String getName()</code></li>
</ul>
<p>线程名字不建议修改、重名。</p>
<p>所有的线程对象都要执行<code>run()</code>，那么可以考虑获取当前线程，在 Thread 类中提供有此方法<code>public static Thread currenThread()</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">MyThread</span> <span style="color:#007020;font-weight:bold">implements</span> Runnable <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#902000">void</span> <span style="color:#06287e">run</span><span style="color:#666">()</span> <span style="color:#666">{</span>
    System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">());</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>

<span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    MyThread mt <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">new</span> MyThread<span style="color:#666">();</span>
    <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>mt<span style="color:#666">,</span> <span style="color:#4070a0">&#34;线程A&#34;</span><span style="color:#666">).</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>mt<span style="color:#666">,</span> <span style="color:#4070a0">&#34;线程B&#34;</span><span style="color:#666">).</span><span style="color:#4070a0">start</span><span style="color:#666">();</span> <span style="color:#60a0b0;font-style:italic">// 当设置了名字的时候就显示设置的名字
</span><span style="color:#60a0b0;font-style:italic"></span>    <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>mt<span style="color:#666">).</span><span style="color:#4070a0">start</span><span style="color:#666">();</span> <span style="color:#60a0b0;font-style:italic">// 无名字也能自动命名为一个不重复的名字
</span><span style="color:#60a0b0;font-style:italic"></span>  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>当直接通过线程对象执行<code>run()</code>时：<code>mt.run()</code>观察结果会发现此时线程名字为 main，所以得出结论，主方法也是一个线程。 每当使用 java 命令运行程序的时候就表示启动了一个 JVM 进程，一台电脑上只可以同时启动一个，所以每一个 JVM 进程都会有其各自的线程。在开发中，主线程可创建出若干的子线程，目的是可以将一些复杂逻辑交由子线程处理。</p>

<h2 id="线程的休眠" class="anchor-link"><a href="#%e7%ba%bf%e7%a8%8b%e7%9a%84%e4%bc%91%e7%9c%a0">线程的休眠</a></h2>
<p>如果说现在希望某一个线程可以暂缓执行一次，那么就可以使用休眠处理。在 Thread 中定义的休眠方法：</p>
<p><code>public static void sleep(long millis) throws InterruptedException</code></p>
<p><code>public static void sleep(long millis, int nanos) throws InterruptedException</code></p>
<p>在进行休眠的时候有可能会产生中断异常，其为 Exception 的子类，所以必须进行处理。</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
            <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
              <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 10<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
                System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">()</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
                <span style="color:#007020;font-weight:bold">try</span> <span style="color:#666">{</span>
                  Thread<span style="color:#666">.</span><span style="color:#4070a0">sleep</span><span style="color:#666">(</span>1000<span style="color:#666">);</span>
                <span style="color:#666">}</span> <span style="color:#007020;font-weight:bold">catch</span> <span style="color:#666">(</span>InterruptedException e<span style="color:#666">)</span> <span style="color:#666">{</span>
                  e<span style="color:#666">.</span><span style="color:#4070a0">printStackTrace</span><span style="color:#666">();</span>
                <span style="color:#666">}</span>
              <span style="color:#666">}</span>
            <span style="color:#666">},</span>
            <span style="color:#4070a0">&#34;线程对象&#34;</span><span style="color:#666">)</span>
        <span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>休眠的主要特点时可以自动实现线程的唤醒。但是需要注意到的是，如果有多个线程对象需要进行休眠处理，那么休眠的顺序也是有说法的。</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> i <span style="color:#666">=</span> 0<span style="color:#666">;</span> i <span style="color:#666">&lt;</span> 5<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
      <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
              <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
                <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 10<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
                  System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">()</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
                  <span style="color:#007020;font-weight:bold">try</span> <span style="color:#666">{</span>
                    Thread<span style="color:#666">.</span><span style="color:#4070a0">sleep</span><span style="color:#666">(</span>100<span style="color:#666">);</span>
                  <span style="color:#666">}</span> <span style="color:#007020;font-weight:bold">catch</span> <span style="color:#666">(</span>InterruptedException e<span style="color:#666">)</span> <span style="color:#666">{</span>
                    e<span style="color:#666">.</span><span style="color:#4070a0">printStackTrace</span><span style="color:#666">();</span>
                  <span style="color:#666">}</span>
                <span style="color:#666">}</span>
              <span style="color:#666">},</span>
              <span style="color:#4070a0">&#34;线程对象&#34;</span> <span style="color:#666">+</span> i<span style="color:#666">)</span>
          <span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    <span style="color:#666">}</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>此时将产生五个线程对象。并且这五个对象执行的方法是一样的。从直觉上来查看结果：</p>
<pre><code>线程对象00
线程对象40
线程对象30
线程对象10
线程对象20
线程对象01
线程对象31
线程对象11
线程对象41
线程对象21
线程对象12
线程对象42
线程对象02
线程对象32
线程对象22
线程对象13
线程对象33
线程对象23
线程对象03
线程对象43
线程对象04
线程对象24
线程对象14
线程对象34
线程对象44
线程对象15
线程对象05
线程对象25
线程对象45
线程对象35
线程对象46
线程对象36
线程对象16
线程对象06
线程对象26
线程对象07
线程对象47
线程对象17
线程对象37
线程对象27
线程对象38
线程对象18
线程对象08
线程对象48
线程对象28
线程对象19
线程对象49
线程对象39
线程对象09
线程对象29
</code></pre><p>会发现是一起执行休眠，一起执行唤醒。但实际上是有先后顺序的。</p>

<h2 id="线程中断" class="anchor-link"><a href="#%e7%ba%bf%e7%a8%8b%e4%b8%ad%e6%96%ad">线程中断</a></h2>
<p>在<a href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BC%91%E7%9C%A0">线程的休眠</a>我们发现提供有一个中断异常，实际上就证明线程的休眠是可以被打断的，这种打断是由其他线程完成的。在 Thread 里提供有两个相关的方法：</p>
<ul>
<li>判断线程是否被中断：<code>public boolean isInterrupted()</code></li>
<li>中断线程的执行：<code>public void interrupt()</code></li>
</ul>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    Thread thread <span style="color:#666">=</span>
        <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
            <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
              <span style="color:#007020;font-weight:bold">try</span> <span style="color:#666">{</span>
                System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;sleep&#34;</span><span style="color:#666">);</span>
                Thread<span style="color:#666">.</span><span style="color:#4070a0">sleep</span><span style="color:#666">(</span>10000<span style="color:#666">);</span>
              <span style="color:#666">}</span> <span style="color:#007020;font-weight:bold">catch</span> <span style="color:#666">(</span>InterruptedException e<span style="color:#666">)</span> <span style="color:#666">{</span>
                e<span style="color:#666">.</span><span style="color:#4070a0">printStackTrace</span><span style="color:#666">();</span>
              <span style="color:#666">}</span>
              System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;done&#34;</span><span style="color:#666">);</span>
            <span style="color:#666">});</span>
    thread<span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;开始&#34;</span><span style="color:#666">);</span>
    Thread<span style="color:#666">.</span><span style="color:#4070a0">sleep</span><span style="color:#666">(</span>10000<span style="color:#666">);</span>
    <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(!</span>thread<span style="color:#666">.</span><span style="color:#4070a0">isInterrupted</span><span style="color:#666">())</span> <span style="color:#666">{</span>
      System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;执行&#34;</span><span style="color:#666">);</span>
      thread<span style="color:#666">.</span><span style="color:#4070a0">interrupt</span><span style="color:#666">();</span>
    <span style="color:#666">}</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div>
<h2 id="线程强制执行" class="anchor-link"><a href="#%e7%ba%bf%e7%a8%8b%e5%bc%ba%e5%88%b6%e6%89%a7%e8%a1%8c">线程强制执行</a></h2>
<p>当满足某些条件之后，某个线程对象可以一直独占资源，直到该线程的程序执行结束。</p>
<p>无强制执行时：</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    Thread thread <span style="color:#666">=</span>
        <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
            <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
              <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
                System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">()</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
              <span style="color:#666">}</span>
            <span style="color:#666">},</span>
            <span style="color:#4070a0">&#34;线程1 &#34;</span><span style="color:#666">);</span>
    thread<span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
      System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;主线程&#34;</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
    <span style="color:#666">}</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>两个线程交替执行，若想要主线程不断执行，则可用 Thread 中的强制执行方法：<code>public final void join() throws InterruptedException</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    Thread mainThread <span style="color:#666">=</span> Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">();</span>
    Thread thread <span style="color:#666">=</span>
        <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
            <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
              <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
                <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>x <span style="color:#666">&gt;</span> 5<span style="color:#666">)</span> <span style="color:#666">{</span>
                  <span style="color:#007020;font-weight:bold">try</span> <span style="color:#666">{</span>
                    mainThread<span style="color:#666">.</span><span style="color:#4070a0">join</span><span style="color:#666">();</span>
                  <span style="color:#666">}</span> <span style="color:#007020;font-weight:bold">catch</span> <span style="color:#666">(</span>InterruptedException e<span style="color:#666">)</span> <span style="color:#666">{</span>
                    e<span style="color:#666">.</span><span style="color:#4070a0">printStackTrace</span><span style="color:#666">();</span>
                  <span style="color:#666">}</span>
                <span style="color:#666">}</span>
                System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">()</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
              <span style="color:#666">}</span>
            <span style="color:#666">},</span>
            <span style="color:#4070a0">&#34;线程1 &#34;</span><span style="color:#666">);</span>
    thread<span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
      System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;主线程&#34;</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
    <span style="color:#666">}</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div>
<h2 id="线程的礼让" class="anchor-link"><a href="#%e7%ba%bf%e7%a8%8b%e7%9a%84%e7%a4%bc%e8%ae%a9">线程的礼让</a></h2>
<p>先将资源让出去，让别的线程先执行。可以使用 Thread 中的<code>public static void yield()</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Test</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">static</span> <span style="color:#902000">void</span> <span style="color:#06287e">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
    Thread thread <span style="color:#666">=</span>
        <span style="color:#007020;font-weight:bold">new</span> Thread<span style="color:#666">(</span>
            <span style="color:#666">()</span> <span style="color:#666">-&gt;</span> <span style="color:#666">{</span>
              <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
                <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>x <span style="color:#666">%</span> 3 <span style="color:#666">==</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
                  Thread<span style="color:#666">.</span><span style="color:#4070a0">yield</span><span style="color:#666">();</span>
                  System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;礼让&#34;</span><span style="color:#666">);</span>
                <span style="color:#666">}</span>
                System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span>Thread<span style="color:#666">.</span><span style="color:#4070a0">currentThread</span><span style="color:#666">().</span><span style="color:#4070a0">getName</span><span style="color:#666">()</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
              <span style="color:#666">}</span>
            <span style="color:#666">},</span>
            <span style="color:#4070a0">&#34;线程1 &#34;</span><span style="color:#666">);</span>
    thread<span style="color:#666">.</span><span style="color:#4070a0">start</span><span style="color:#666">();</span>
    <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#902000">int</span> x <span style="color:#666">=</span> 0<span style="color:#666">;</span> x <span style="color:#666">&lt;</span> 100<span style="color:#666">;</span> x<span style="color:#666">++)</span> <span style="color:#666">{</span>
      <span style="color:#60a0b0;font-style:italic">//      Thread.sleep(100);
</span><span style="color:#60a0b0;font-style:italic"></span>      System<span style="color:#666">.</span><span style="color:#4070a0">out</span><span style="color:#666">.</span><span style="color:#4070a0">println</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;主线程&#34;</span> <span style="color:#666">+</span> x<span style="color:#666">);</span>
    <span style="color:#666">}</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>礼让执行的时候只应用于一次当前的资源。</p>

<h2 id="优先级" class="anchor-link"><a href="#%e4%bc%98%e5%85%88%e7%ba%a7">优先级</a></h2>
<p>理论上来讲，线程的优先级越高越先执行。在 Thread 里提供有两个方法：</p>
<ul>
<li>设置优先级：<code>public final void setPriority(int newPriority)</code></li>
<li>获取优先级：<code>public final int getPriority()</code></li>
</ul>
<p>通过 int 类型的数字进行优先级定义。在 Thread 中定义有如下几个常量用来设置优先级：</p>
<ul>
<li>最高优先级：<code>public static final int MAX_PRIORITY = 10</code></li>
<li>中等优先级：<code>public static final int NORM_PRIORITY = 5</code></li>
<li>最低优先级：<code>public static final int MIN_PRIORITY = 1</code></li>
</ul>
<p>例如：<code>线程对象.setPriority(Thread.MAX_PRIORITY)</code></p>
<p>优先级高的是有可能限制性，并不是绝对性。</p>
<p>主方法是一个线程，其优先级为 5. 属于中等优先级。默认线程的优先级也是 5.</p>

</div>
<script src="https://utteranc.es/client.js"
    repo="42Sun/blogcomment"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>





                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        ©2019-2020 <a href="https://sundingyi.com">孙丁一</a>. All rights reserved.
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://sundingyi.com/js/bundle.2ee571453a8980175e10bda96bda797cc9c4e2e745e488df68d50cef5deb57ff.js" integrity="sha256-LuVxRTqJgBdeEL2pa9p5fMnE4udF5IjfaNUM713rV/8="></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150971789-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>





        
        
        
        
    </body>
</html>
